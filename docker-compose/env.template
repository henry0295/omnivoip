###################################################################################################
#                                   GENERAL ENVIRONMENT                                           #
###################################################################################################
# Project name (used for Docker network and container naming)
PROJECT_NAME=omnivoip

# IPv4 address of the docker engine host
OML_HOSTNAME=
# If you want to use a public IP, set it here
PUBLIC_IP=${OML_HOSTNAME}
# If you want to use a FQDN, set it here
FQDN=

# Timezone for the environment
TZ=America/Argentina/Cordoba

# VoIP (SIP & RTP) Environment type: "prod", "dev" or "custom"
VOIP_ENV=prod

# If you want to advertise the public IP in the SIP & RTP headers, set this to true
VOIP_NAT=false

# Docker network configuration
SUBNET=10.22.22.0/24
GATEWAY=10.22.22.254

###################################################################################################
#                                  COMPONENT IMAGE VERSIONS                                       #
###################################################################################################

# Backend images
BACKEND_IMG=omnivoip/backend:latest
NGINX_IMG=nginx:alpine
WEBSOCKETS_IMG=omnivoip/websockets:latest

# Telephony images
ASTERISK_IMG=omnivoip/asterisk:latest
KAMAILIO_IMG=omnivoip/kamailio:latest
RTPENGINE_IMG=omnivoip/rtpengine:latest

# Dialer images
DIALER_API_IMG=omnivoip/dialer-api:latest
DIALER_WORKER_IMG=omnivoip/dialer-worker:latest

# Backend services
REDIS_IMG=redis:7-alpine
POSTGRES_IMG=postgres:15-alpine
MINIO_IMG=minio/minio:latest
GEARMAN_IMG=artefactual/gearmand:1.1.21.2-alpine

# Frontend
FRONTEND_IMG=omnivoip/frontend:latest

###################################################################################################
#                                       DJANGO BACKEND                                            #
###################################################################################################
DJANGO_HOSTNAME=django-app
DAPHNE_HOSTNAME=daphne

# Session Cookie Age in seconds (default 1 hour)
SESSION_COOKIE_AGE=3600

# Ephemeral User TTL in seconds (default 8 hours)
EPHEMERAL_USER_TTL=28800

# Secret Key for auth credentials
AUTHEPH_SK=SUp3rS3cr3tK3y_CHANGE_ME

# Django log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
DJANGO_LOG_LEVEL=INFO

# Django settings
DJANGO_SECRET_KEY=django-insecure-CHANGE-THIS-SECRET-KEY-IN-PRODUCTION
DJANGO_DEBUG=false
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1,${OML_HOSTNAME},${PUBLIC_IP}

# UWSGI configuration
UWSGI_PORT=8099
UWSGI_EXT_BIND_IP=${OML_HOSTNAME}

# Daphne configuration
DAPHNE_PORT=8098

# Login failure limit
LOGIN_FAILURE_LIMIT=10

# S3 Storage
S3_STORAGE_ENABLED=true

# Call recording format (mp3, wav, gsm)
MONITORFORMAT=mp3

###################################################################################################
#                                       ASTERISK (PBX)                                            #
###################################################################################################
ACD_HOSTNAME=${OML_HOSTNAME}

# RTP port range (REDUCIDO para Docker bridge mode)
# IMPORTANTE: Coincidir con puertos mapeados en docker-compose.yml
ACD_RTP_PORT_MIN=10000
ACD_RTP_PORT_MAX=10100

# AMI credentials
ACD_AMI_USER=omnivoipami
ACD_AMI_PASSWORD=5_MeO_DMT_CHANGE_ME

# Log level (0=ERROR, 1=WARNING, 3=NOTICE, 4=INFO, 5=DEBUG)
ACD_LOG_LEVEL=3

# Call recording split for transcriptions
ACD_CALLREC_SPLIT=False

# PJSIP Transport
ACD_PJSIP_TRANSPORT_AGENT=${ACD_HOSTNAME}
ACD_PJSIP_TRANSPORT_TRUNK=${ACD_HOSTNAME}
ACD_PJSIP_TRANSPORT_DIALER=127.0.0.1

###################################################################################################
#                                       CALL TRANSCRIPTIONS                                       #
###################################################################################################
# Speech to Text engine: openai, gemini, or local
STT_ENGINE=openai

# API Key for STT (OpenAI or Gemini)
STT_API_KEY=sk-proj-YOUR-API-KEY-HERE

# Google Cloud JSON credentials path
STT_GCP_JSON_PATH=/app/google_credentials.json

###################################################################################################
#                                       FASTAGI                                                   #
###################################################################################################
FASTAGI_HOSTNAME=${OML_HOSTNAME}
FASTAGI_PORT=4573
FASTAGI_EXT_BIND_IP=${OML_HOSTNAME}
FASTAGI_EXT_PORT=4573

###################################################################################################
#                                       POSTGRESQL                                                #
###################################################################################################
POSTGRES_HOSTNAME=postgresql
POSTGRES_DB=omnivoip
POSTGRES_PORT=5432
POSTGRES_USER=omnivoip
POSTGRES_PASSWORD=CHANGE_THIS_PASSWORD_123

# High Availability
POSTGRES_HA=false
POSTGRES_NODE_RO=

# SSL
POSTGRES_SSL=false
POSTGRES_EXT_BIND_IP=${OML_HOSTNAME}
POSTGRES_EXT_PORT=5432

###################################################################################################
#                                       WEBSOCKETS                                                #
###################################################################################################
WEBSOCKET_HOSTNAME=websockets
WEBSOCKET_PORT=8000
WEBSOCKET_EXT_BIND_IP=${OML_HOSTNAME}
WEBSOCKET_EXT_PORT=8000

# Logger level
WEBSOCKET_LOGGER=DEBUG:fts.oml.services.websockets;INFO:websockets.server

# Redis connection
WEBSOCKET_REDIS_HOSTNAME=redis://redis:6379

###################################################################################################
#                                       KAMAILIO (WebRTC)                                         #
###################################################################################################
KAMAILIO_WEBRTC_HOSTNAME=127.0.0.1
KAMAILIO_WEBRTC_SIP_PORT=10060
KAMAILIO_HTTPS_PORT=14443
KAMAILIO_CERTS_LOCATION=/etc/kamailio/certs

# Memory configuration (MB)
SHM_SIZE=64
PKG_SIZE=8

###################################################################################################
#                                   NGINX - RTPENGINE - REDIS - GEARMAN                           #
###################################################################################################
# Nginx
NGINX_HOSTNAME=${OML_HOSTNAME}
NGINX_EXT_BIND_IP=${OML_HOSTNAME}
NGINX_EXT_PORT=443
NGINX_WEBUI_MODE=static

# Redis
REDIS_HOSTNAME=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD
REDIS_EXT_BIND_IP=${OML_HOSTNAME}
REDIS_EXT_PORT=6379

# RTPEngine
RTPENGINE_HOSTNAME=${OML_HOSTNAME}
RTPENGINE_BIND_UDP_PORT=22222
RTPENGINE_RTP_PORT_MIN=20001
RTPENGINE_RTP_PORT_MAX=30000
RTPENGINE_LOG_LEVEL=1
RTPENGINE_RTP_ADDR="internal/${RTPENGINE_HOSTNAME};external/${PUBLIC_IP}"

# Gearman
GEARMAN_HOSTNAME=gearman
GEARMAN_PORT=4730
GEARMAN_EXT_BIND_IP=${OML_HOSTNAME}
GEARMAN_EXT_PORT=4730
GEARMAN_JOB_SERVERS=${GEARMAN_HOSTNAME}:${GEARMAN_PORT}

###################################################################################################
#                                   OBJECT STORAGE (MinIO/S3)                                     #
###################################################################################################
# Bucket name
BUCKET_NAME=omnivoip

# Credentials
BUCKET_ACCESS_KEY_ID=omnivoipminio
BUCKET_SECRET_ACCESS_KEY=s3omnivoip123_CHANGE_ME
BUCKET_DEFAULT_REGION=us-east-1

# Endpoint
BUCKET_ENDPOINT=https://${OML_HOSTNAME}
BUCKET_ENDPOINT_MINIO=http://${OML_HOSTNAME}:9000

# MinIO admin credentials
MINIO_HTTP_ADMIN_USER=minioadmin
MINIO_HTTP_ADMIN_PASS=s3minio123_CHANGE_ME

# MinIO ports
MINIO_EXT_BIND_IP=${OML_HOSTNAME}
MINIO_EXT_PORT=9000
MINIO_EXT_CONSOLE_PORT=9001

###################################################################################################
#                                       DIALER ENGINE                                             #
###################################################################################################
# Dialer password for API communication
DIALER_PASSWORD=0mn1d14l3r765_CHANGE_ME

# Dialer engine: "omnidialer" or "wombat"
DIALER_ENGINE=omnidialer

# API configuration
DIALER_API_HOST=dialer-api:1440
DIALER_API_EXT_BIND_IP=${OML_HOSTNAME}
DIALER_API_EXT_PORT=1440

# Asterisk dialer
DIALER_ASTERISK_HOSTNAME=${OML_HOSTNAME}
DIALER_ASTERISK_ARI_PORT=8888
DIALER_ASTERISK_APP=call_manager_dialer
DIALER_SIP_ADDR=127.0.0.1

# Redis connection
DIALER_REDIS_SERVER=${REDIS_HOSTNAME}
DIALER_REDIS_PORT=${REDIS_PORT}
DIALER_REDIS_DB=3

# WebSocket connection
DIALER_DCHANNELS_URL=wss://${NGINX_HOSTNAME}/channels/omnidialer/${DIALER_PASSWORD}

# PostgreSQL for dialer
DIALER_POSTGRES_USER=omnidialer
DIALER_POSTGRES_PASSWORD=dialer456_CHANGE_ME
DIALER_POSTGRES_SERVER=dialer-postgresql
DIALER_POSTGRES_PORT=5433
DIALER_POSTGRES_DB=omnidialer

# Gearman jobs
DIALER_GEARMAN_JOBS=start-campaign|stop-campaign|resume-campaign|process-contact|schedule-contact

# Performance settings
DIALER_CAPS=1
DIALER_TIME_BETWEEN_CALLS=1

# Worker replicas
DIALER_PROCESS_CAMPAIGN_REPLICAS=5
DIALER_PROCESS_EVENT_REPLICAS=1

# Log level
DIALER_PYTHON_LOGLEVEL=info

###################################################################################################
#                                       BACKUP / RESTORE                                          #
###################################################################################################
# PostgreSQL backup settings
SQL_HOST=${POSTGRES_HOSTNAME}
SQL_PORT=${POSTGRES_PORT}
SQL_USER=${POSTGRES_USER}
SQL_PASSWORD=${POSTGRES_PASSWORD}
SQL_DATABASE=${POSTGRES_DB}

# S3 backup bucket (can be different from main bucket)
S3_BUCKET_NAME=omnivoip-backups
S3_ENDPOINT=https://s3.amazonaws.com
S3_ACCESS_KEY_ID=YOUR_S3_ACCESS_KEY
S3_SECRET_ACCESS_KEY=YOUR_S3_SECRET_KEY
S3_REGION=us-east-1
S3_DONT_VERIFY_SSL=false

###################################################################################################
#                                       MONITORING                                                #
###################################################################################################
HOMER_ENABLE=false
HOMER_HOSTNAME=heplify-server
HOMER_PORT=9060

###################################################################################################
#                                       INTEGRATIONS                                              #
###################################################################################################
# Google Maps
GOOGLE_MAPS_API_KEY=NULL
GOOGLE_MAPS_CENTER='{ "lat": -31.416668, "lng": -64.183334 }'

# Google Cloud
GOOGLE_API_KEY=YOUR_GOOGLE_API_KEY
GOOGLE_CLOUD_PROJECTID=your_project_id

###################################################################################################
#                                       EMAIL                                                     #
###################################################################################################
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=
EMAIL_PASSWORD=
EMAIL_USE_TLS=true
EMAIL_FROM=noreply@omnivoip.com

###################################################################################################
#                                       CELERY WORKERS                                            #
###################################################################################################
CELERY_BROKER_URL=redis://:${REDIS_PASSWORD}@redis:6379/0
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@redis:6379/0
WORKER_REPLICAS=2

###################################################################################################
#                                       DEVELOPMENT / TESTING                                     #
###################################################################################################
# PSTN Emulator mode (for testing)
# Options: default, dial2softphone, ans_busy, ans_busy_congestion_noans, advanced
PSTN_EMULATOR_MODE=default
